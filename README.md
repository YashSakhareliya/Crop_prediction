# 🌾 Crop Recommendation and Yield Analysis API

A Flask-based REST API for crop recommendation and yield prediction using machine learning models trained on soil parameters. This intelligent agricultural system helps farmers make data-driven decisions for optimal crop selection and yield estimation.

## 🚀 Live Demo

**API Base URL:** `https://your-project-name.vercel.app`
**Documentation:** [Complete API Guide](./API_DOCUMENTATION.md)

## 🌟 Features

- **🌱 Crop Recommendation**: Get top 3 crop recommendations with confidence scores based on soil conditions
- **🔬 Soil Analysis**: Analyze soil parameters against ideal ranges for specific crops (LOW/OPTIMAL/HIGH)
- **📈 Yield Prediction**: Predict expected yield for crops under given soil conditions
- **🌾 22 Supported Crops**: Comprehensive database covering cereals, pulses, fruits, and cash crops
- **🔄 RESTful API**: Easy to integrate with any web or mobile application
- **🤖 Machine Learning**: Random Forest models with 99.55% accuracy for crop prediction
- **⚡ High Performance**: Sub-200ms response times with 98% R² score for yield prediction

## 📊 Supported Crops

| Category | Crops |
|----------|-------|
| **Cereals** | Rice, Maize |
| **Pulses** | Chickpea, Kidneybeans, Pigeonpeas, Mothbeans, Mungbean, Blackgram, Lentil |
| **Fruits** | Pomegranate, Banana, Mango, Grapes, Watermelon, Muskmelon, Apple, Orange, Papaya |
| **Cash Crops** | Coconut, Cotton, Jute, Coffee |

## 🎯 Model Performance

- **Crop Prediction**: 99.55% accuracy (Random Forest Classifier)
- **Yield Prediction**: R² = 0.9806, RMSE = 1,384 kg/ha (Random Forest Regressor)
- **Dataset**: 2,200 samples with 7 soil parameters
- **Features**: Nitrogen, Phosphorus, Potassium, Temperature, Humidity, pH, Rainfall

## 🔧 Local Development

```bash
# Clone the repository
git clone <your-repo-url>
cd crop-recommendation-api

# Create virtual environment
python -m venv venv

# Activate virtual environment
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Train models (run Jupyter notebook)
jupyter notebook model_training.ipynb
# Execute all cells to generate model files

# Run the Flask app
python app.py

# API will be available at http://localhost:5000
```

## 📡 Quick API Test

```bash
# Test crop prediction
curl -X POST http://localhost:5000/predict-crop \
  -H "Content-Type: application/json" \
  -d '{
    "nitrogen": 90,
    "phosphorus": 40,
    "potassium": 40,
    "temperature": 25,
    "humidity": 80,
    "ph": 6.5,
    "rainfall": 200
  }'

# Expected response:
# {
#   "recommended_crops": ["rice", "jute", "papaya"],
#   "confidence": [0.871, 0.125, 0.002]
# }
```

## 🌐 Deployment

This project is configured for Vercel deployment:

```bash
# Install Vercel CLI
npm install -g vercel

# Login to your Vercel account
vercel login

# Deploy (from project root)
vercel

# Follow the prompts to deploy
```

### Project Structure for Deployment
```
your-project/
├── api/
│   └── index.py          # Main Flask app for Vercel
├── models/
│   ├── crop_model.pkl    # Generated by training notebook
│   ├── yield_model.pkl   # Generated by training notebook
│   ├── label_encoder.pkl # Generated by training notebook
│   └── ideal_ranges.json # Generated by training notebook
├── vercel.json           # Vercel configuration
├── requirements.txt      # Python dependencies
├── model_training.ipynb  # Training notebook
└── README.md
```

## 📖 Complete API Documentation

For detailed API documentation with all endpoints, parameters, and examples, see:
**[📋 API_DOCUMENTATION.md](./API_DOCUMENTATION.md)**

### Available Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | API information and available endpoints |
| `/predict-crop` | POST | Get crop recommendations based on soil parameters |
| `/analyze-crop` | POST | Analyze soil conditions for a specific crop |
| `/predict-yield` | POST | Predict yield for a crop under given conditions |
| `/health` | GET | API health check and model status |
| `/crops` | GET | List all supported crops |

## 🎯 Use Cases

- **🌾 Farm Management**: Help farmers choose optimal crops for their soil conditions
- **🏛️ Agricultural Consulting**: Provide data-driven recommendations to agricultural consultants  
- **📱 Mobile Apps**: Integrate into farming apps for real-time crop guidance
- **🎓 Research**: Support agricultural research with yield prediction capabilities
- **🏢 AgTech**: Power agricultural technology platforms and IoT systems

## 🛠️ Technology Stack

- **Backend**: Flask (Python)
- **ML Framework**: scikit-learn
- **Data Processing**: pandas, numpy
- **Deployment**: Vercel
- **Model**: Random Forest (Classification & Regression)
- **Data Format**: JSON REST API

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Submit a pull request

## 📄 License

This project is licensed under the MIT License.